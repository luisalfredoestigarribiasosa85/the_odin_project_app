<%# app/views/messages/_message.html.erb %>
<% is_mine = message.user == current_user %>

<div id="<%= dom_id message %>" class="flex <%= is_mine ? 'justify-end' : 'justify-start' %>">
  <div class="max-w-[75%]">
    <% unless is_mine %>
      <p class="text-xs text-gray-500 mb-1 ml-1"><%= message.user&.username %></p>
    <% end %>
    <div class="px-4 py-2 rounded-2xl shadow-sm <%= is_mine ? 'bg-indigo-600 text-white rounded-tr-none' : 'bg-white text-gray-800 border border-gray-200 rounded-tl-none' %>">
      <p class="text-sm"><%= message.body %></p>
      <p class="text-[10px] mt-1 text-right <%= is_mine ? 'text-indigo-200' : 'text-gray-400' %>">
        <%= message.created_at.strftime("%H:%M") %>
      </p>
    </div>
  </div>
</div>